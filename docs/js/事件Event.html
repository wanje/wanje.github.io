<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>事件Event | Notebook</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/docs/favicon.ico">
    <meta name="description" content="个人学习记录，资料收集备忘">
    
    <link rel="preload" href="/docs/assets/css/0.styles.89b5ee64.css" as="style"><link rel="preload" href="/docs/assets/js/app.75a61c29.js" as="script"><link rel="preload" href="/docs/assets/js/2.3ed89261.js" as="script"><link rel="preload" href="/docs/assets/js/38.682ac94b.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.7cb63053.js"><link rel="prefetch" href="/docs/assets/js/11.bdef03ea.js"><link rel="prefetch" href="/docs/assets/js/12.cac19daf.js"><link rel="prefetch" href="/docs/assets/js/13.1d034024.js"><link rel="prefetch" href="/docs/assets/js/14.9da2ad7e.js"><link rel="prefetch" href="/docs/assets/js/15.347c24ca.js"><link rel="prefetch" href="/docs/assets/js/16.2a4b469c.js"><link rel="prefetch" href="/docs/assets/js/17.3beef25d.js"><link rel="prefetch" href="/docs/assets/js/18.d9882ce0.js"><link rel="prefetch" href="/docs/assets/js/19.35e5c1ce.js"><link rel="prefetch" href="/docs/assets/js/20.97bd1a91.js"><link rel="prefetch" href="/docs/assets/js/21.4f91c87e.js"><link rel="prefetch" href="/docs/assets/js/22.c9b1f124.js"><link rel="prefetch" href="/docs/assets/js/23.36af841a.js"><link rel="prefetch" href="/docs/assets/js/24.fa1b3015.js"><link rel="prefetch" href="/docs/assets/js/25.e16a9423.js"><link rel="prefetch" href="/docs/assets/js/26.ffb9d917.js"><link rel="prefetch" href="/docs/assets/js/27.ef419703.js"><link rel="prefetch" href="/docs/assets/js/28.1fba2ea4.js"><link rel="prefetch" href="/docs/assets/js/29.44bbf18f.js"><link rel="prefetch" href="/docs/assets/js/3.ae46b4d8.js"><link rel="prefetch" href="/docs/assets/js/30.7635f89f.js"><link rel="prefetch" href="/docs/assets/js/31.51604613.js"><link rel="prefetch" href="/docs/assets/js/32.d8ef90cb.js"><link rel="prefetch" href="/docs/assets/js/33.a4043174.js"><link rel="prefetch" href="/docs/assets/js/34.20c8b958.js"><link rel="prefetch" href="/docs/assets/js/35.aad06573.js"><link rel="prefetch" href="/docs/assets/js/36.069dedba.js"><link rel="prefetch" href="/docs/assets/js/37.37092e52.js"><link rel="prefetch" href="/docs/assets/js/39.43d1b106.js"><link rel="prefetch" href="/docs/assets/js/4.8b11ba05.js"><link rel="prefetch" href="/docs/assets/js/40.7218a227.js"><link rel="prefetch" href="/docs/assets/js/41.93ff5e0c.js"><link rel="prefetch" href="/docs/assets/js/42.1c85d75c.js"><link rel="prefetch" href="/docs/assets/js/43.8bd1225e.js"><link rel="prefetch" href="/docs/assets/js/44.3530ae28.js"><link rel="prefetch" href="/docs/assets/js/45.a14c9b1b.js"><link rel="prefetch" href="/docs/assets/js/46.3e391b64.js"><link rel="prefetch" href="/docs/assets/js/47.9ce08791.js"><link rel="prefetch" href="/docs/assets/js/48.f03ec9bf.js"><link rel="prefetch" href="/docs/assets/js/49.eb794b2e.js"><link rel="prefetch" href="/docs/assets/js/5.24b82288.js"><link rel="prefetch" href="/docs/assets/js/50.120d9bd4.js"><link rel="prefetch" href="/docs/assets/js/51.af4bc61d.js"><link rel="prefetch" href="/docs/assets/js/52.22da774c.js"><link rel="prefetch" href="/docs/assets/js/53.3867eb4d.js"><link rel="prefetch" href="/docs/assets/js/54.826e11e4.js"><link rel="prefetch" href="/docs/assets/js/55.baf85697.js"><link rel="prefetch" href="/docs/assets/js/56.263867ba.js"><link rel="prefetch" href="/docs/assets/js/57.0dc40928.js"><link rel="prefetch" href="/docs/assets/js/58.a4a11829.js"><link rel="prefetch" href="/docs/assets/js/59.51382aa1.js"><link rel="prefetch" href="/docs/assets/js/6.bf003d49.js"><link rel="prefetch" href="/docs/assets/js/60.2ee9213b.js"><link rel="prefetch" href="/docs/assets/js/61.360a4e9f.js"><link rel="prefetch" href="/docs/assets/js/62.a36bbd17.js"><link rel="prefetch" href="/docs/assets/js/63.7b5e2018.js"><link rel="prefetch" href="/docs/assets/js/64.2e23ba2d.js"><link rel="prefetch" href="/docs/assets/js/65.ebce3f53.js"><link rel="prefetch" href="/docs/assets/js/66.01fc6eef.js"><link rel="prefetch" href="/docs/assets/js/67.2d2cef90.js"><link rel="prefetch" href="/docs/assets/js/68.dd498c63.js"><link rel="prefetch" href="/docs/assets/js/69.40f5fa54.js"><link rel="prefetch" href="/docs/assets/js/7.4b570e0d.js"><link rel="prefetch" href="/docs/assets/js/70.08ab7f70.js"><link rel="prefetch" href="/docs/assets/js/71.a6c20f4a.js"><link rel="prefetch" href="/docs/assets/js/72.ef379ecc.js"><link rel="prefetch" href="/docs/assets/js/73.a4b6ef99.js"><link rel="prefetch" href="/docs/assets/js/74.3ca83c8d.js"><link rel="prefetch" href="/docs/assets/js/75.985f2a9e.js"><link rel="prefetch" href="/docs/assets/js/76.fa2a274e.js"><link rel="prefetch" href="/docs/assets/js/77.3d58788d.js"><link rel="prefetch" href="/docs/assets/js/78.5892f6ad.js"><link rel="prefetch" href="/docs/assets/js/79.b349eeba.js"><link rel="prefetch" href="/docs/assets/js/8.b236ccf0.js"><link rel="prefetch" href="/docs/assets/js/80.7ed7685d.js"><link rel="prefetch" href="/docs/assets/js/9.c54efe38.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.89b5ee64.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/logo.png" alt="Notebook" class="logo"> <span class="site-name can-hide">Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记分类" class="dropdown-title"><span class="title">笔记分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记分类" class="mobile-dropdown-title"><span class="title">笔记分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/js/" class="nav-link router-link-active">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/docs/css/" class="nav-link">
  CSS
</a></li></ul></div></div><div class="nav-item"><a href="https://wanje.github.io/demo_notes/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更多
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记分类" class="dropdown-title"><span class="title">笔记分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记分类" class="mobile-dropdown-title"><span class="title">笔记分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/js/" class="nav-link router-link-active">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/docs/css/" class="nav-link">
  CSS
</a></li></ul></div></div><div class="nav-item"><a href="https://wanje.github.io/demo_notes/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更多
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/html/HTML零散集.html" class="sidebar-link">HTML零散集</a></li><li><a href="/docs/html/a标签的各种用途.html" class="sidebar-link">a标签的各种用途</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/js/JS错题本.html" class="sidebar-link">JS错题本</a></li><li><a href="/docs/js/JS零散集.html" class="sidebar-link">JS零散集</a></li><li><a href="/docs/js/数组Array.html" class="sidebar-link">数组Array</a></li><li><a href="/docs/js/字符串String.html" class="sidebar-link">字符串String</a></li><li><a href="/docs/js/计算Math.html" class="sidebar-link">计算Math</a></li><li><a href="/docs/js/事件Event.html" class="active sidebar-link">事件Event</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/js/事件Event.html#事件类型与event对象" class="sidebar-link">事件类型与Event对象</a></li><li class="sidebar-sub-header"><a href="/docs/js/事件Event.html#自定义-模拟事件" class="sidebar-link">自定义&amp;模拟事件</a></li><li class="sidebar-sub-header"><a href="/docs/js/事件Event.html#事件处理兼容" class="sidebar-link">事件处理兼容</a></li></ul></li><li><a href="/docs/js/WebComponents.html" class="sidebar-link">Web Components</a></li><li><a href="/docs/js/File文件API.html" class="sidebar-link">File文件API</a></li><li><a href="/docs/js/鼠标拖放与拖拽dnd.html" class="sidebar-link">鼠标拖拽与拖放</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ES6+</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/js/es6+/Class.html" class="sidebar-link">Class</a></li><li><a href="/docs/js/es6+/Promise.html" class="sidebar-link">Promise</a></li><li><a href="/docs/js/es6+/async-await.html" class="sidebar-link">async/await</a></li><li><a href="/docs/js/es6+/Proxy.html" class="sidebar-link">Proxy</a></li><li><a href="/docs/js/es6+/Reflect.html" class="sidebar-link">Reflect</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/css/CSS零散集.html" class="sidebar-link">CSS零散集</a></li><li><a href="/docs/css/scss语法.html" class="sidebar-link">SCSS基础语法</a></li><li><a href="/docs/css/CSS选择器世界.html" class="sidebar-link">CSS选择器世界</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>CSS世界</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/css/CSS世界/层叠规则.html" class="sidebar-link">层叠规则</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>CSS新世界</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/css/CSS新世界/第6章.html" class="sidebar-link">第 6 章 全新的布局方式</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>绘图&amp;动画</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/draw-animation/D3js.html" class="sidebar-link">D3.js</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Threejs开发指南</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/vue/vue工程配置.html" class="sidebar-link">Vue工程创建及配置</a></li><li><a href="/docs/vue/vue基础语法.html" class="sidebar-link">Vue基础语法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/react/react工程配置.html" class="sidebar-link">React工程创建及配置</a></li><li><a href="/docs/react/react基础语法.html" class="sidebar-link">React基础语法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/typescript/类型/为什么需要类型.html" class="sidebar-link">为什么需要类型</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>类型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>泛型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>类型转换</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/docs/typescript/模块/CommonJS兼容模块.html" class="sidebar-link">CommonJS兼容模块</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>命名空间</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>理解声明</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Node</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/node/Node模块机制.html" class="sidebar-link">Node模块机制与NPM包</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/webpack/webpack4.x笔记.html" class="sidebar-link">webpack4.x笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/python/python基础语法.html" class="sidebar-link">Python基础语法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/others/参考内容.html" class="sidebar-link">参考内容</a></li><li><a href="/docs/others/lint-format.html" class="sidebar-link">代码检查与格式化</a></li><li><a href="/docs/others/Markdown语法.html" class="sidebar-link">Markdown语法</a></li><li><a href="/docs/others/Git使用.html" class="sidebar-link">Git使用</a></li><li><a href="/docs/others/Gulp使用.html" class="sidebar-link">Gulp使用</a></li><li><a href="/docs/others/Rollup使用.html" class="sidebar-link">Rollup使用</a></li><li><a href="/docs/others/Nginx配置.html" class="sidebar-link">Nginx基础配置与操作</a></li><li><a href="/docs/others/环境&amp;软件安装.html" class="sidebar-link">环境&amp;软件安装</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="事件event"><a href="#事件event" class="header-anchor">#</a> 事件Event</h1> <h2 id="事件类型与event对象"><a href="#事件类型与event对象" class="header-anchor">#</a> 事件类型与Event对象</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">/**===== HTML事件处理程序 =====*/</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;input type=&quot;text&quot; onfocus=&quot;foo()&quot; onblur=&quot;alert(event.type, this.value)&quot; /&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">//直接在HTML元素上通过attribute属性的方式绑定事件时，其值实际是字符串形式的JS代码段，就像eval方法一样，</span>
<span class="token comment">//该代码段执行时有权访问全局作用域下的任何js代码，也可直接访问事件对象event和指向该事件目标元素的this关键字，且不用自己定义，也不用从函数的参数列表中读取</span>

<span class="token comment">/**===== DOM0级事件处理程序 =====*/</span>
el<span class="token punctuation">.</span>onclick <span class="token operator">=</span> foo<span class="token punctuation">;</span> <span class="token comment">//绑定事件处理程序，在事件冒泡阶段响应，foo中的this指向当前元素el</span>
el<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//移除事件处理程序</span>

<span class="token comment">/**===== DOM2级事件处理程序（IE9+支持） =====*/</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> foo<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绑定事件处理程序(可绑定多个，同类型按绑定顺序响应)，接收三个参数，最后一个参数表示事件响应阶段，true为捕获阶段响应，false为冒泡阶段响应，默认false，foo中的this指向当前元素el</span>
el<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> foo<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//移除事件处理程序，必须与addEventListener参数完全相同才能移除对应事件处理程序(函数要为同一引用，意味着不能移除绑定的匿名事件处理函数，即使再定义个相同的匿名函数也不行，因为不是同一引用)</span>
<span class="token comment">//注意，若绑定多个程序就要分别多次移除，不存在省略函数名或者事件名就移除所有对应素有事件处理程序的功能</span>

<span class="token comment">/**===== IE独有事件处理程序（IE10-支持） =====*/</span>
el<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绑定事件处理程序(可绑定多个，但同类型按绑定顺序逆序响应)，接收两个参数，注意该方法foo中的this指向的是window对象</span>
el<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//移除事件处理程序，必须与attachEvent参数完全相同才能移除对应事件处理程序(同DOM2级事件处理程序一样不能移除绑定的匿名事件处理函数)</span>
<span class="token comment">//注意，该IE独有方法中的事件名前面要加“on”，且foo中的this指向的是window对象</span>


<span class="token comment">/** DOM2级事件规定事件流分为三个阶段：捕获阶段、处于目标阶段、冒泡阶段，在事件处理程序中处于目标阶段也被看作是冒泡阶段的一部分 */</span>

<span class="token comment">/**==================================================== Event对象 ====================================================*/</span>
<span class="token comment">/*
* 事件event对象中包含着所有与事件相关的信息，包括事件源、类型及其他特定事件相关信息，不同事件类型包含的可用属性和方法也不一样，但也有一些所有事件类型通用的属性和方法
* 将event对象作为参数传递给事件处理函数，在处理函数内部使用，但在IE8及以下需要通过全局变量event才能得到，所以兼容写法为：event = event || window.event
* event对象只有在事件处理程序执行期间才存在，一旦事件处理程序执行完成，event对象就会被销毁
* */</span>
<span class="token comment">/** DOM规范中Event对象内通用属性和方法，注意它们都是只读的 */</span>
<span class="token keyword">let</span> standardEventCommonPops <span class="token operator">=</span> <span class="token punctuation">{</span>
  bubbles<span class="token operator">:</span> <span class="token string">'布尔值，表明该事件是否冒泡'</span><span class="token punctuation">,</span>
  cancelable<span class="token operator">:</span> <span class="token string">'布尔值，表明是否可以取消该事件的默认行为'</span><span class="token punctuation">,</span>
  currentTarget<span class="token operator">:</span> <span class="token string">'元素，指向事件处理程序绑定到的那个元素，即JS中直接注册(绑定)事件的那个元素，事件处理函数中 this 关键字的值与该属性相同'</span><span class="token punctuation">,</span>
  defaultPrevented<span class="token operator">:</span> <span class="token string">'布尔值，为true则表示已调用了preventDefault()方法，否则没有，为DOM3级事件中新增属性'</span><span class="token punctuation">,</span>
  detail<span class="token operator">:</span> <span class="token string">'整数，与事件相关的细节信息'</span><span class="token punctuation">,</span>
  eventPhase<span class="token operator">:</span> <span class="token string">'整数，表示调用事件处理程序的阶段(也即触发阶段)：1为捕获阶段，2为处于目标，3为冒泡阶段'</span><span class="token punctuation">,</span>
  target<span class="token operator">:</span> <span class="token string">'元素，事件的目标元素，即实际触发该事件的元素(不一定是JS中注册事件的那个元素，因为可能是事件代理)'</span><span class="token punctuation">,</span>
  trusted<span class="token operator">:</span> <span class="token string">'实测浏览器中为“isTrusted”，布尔值，为true表示事件是浏览器生成或用户触发，为false表示事件是由开发人员通过JS创建而成，为DOM3级事件中新增属性'</span><span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">'字符串，被触发事件的类型，实际为事件名'</span><span class="token punctuation">,</span>
  view<span class="token operator">:</span> <span class="token string">'AbstractView，与事件关联的抽象视图，等同于发生事件的window对象'</span><span class="token punctuation">,</span>
  <span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//preventDefault()方法用于取消事件的默认行为，若cancelable为true，该方法有效</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//stopPropagation()方法用于阻止事件进一步捕获或冒泡，若bubbles为true，该方法有效</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//stopImmediatePropagation()方法用于阻止事件进一步捕获或冒泡，同时阻止任何任何事件处理程序被调用，为DOM3级事件中新增方法</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/** IE中Event对象内通用属性和方法 */</span>
<span class="token keyword">let</span> ieEventCommonPops <span class="token operator">=</span> <span class="token punctuation">{</span>
  cancelBubble<span class="token operator">:</span> <span class="token string">'布尔值，可读可写，默认false，设为true可取消事件冒泡，与DOM规范中stopPropagation()方法作用相同'</span><span class="token punctuation">,</span>
  returnValue<span class="token operator">:</span> <span class="token string">'布尔值，可读可写，默认true，设为false可取消事件的默认行为，与DOM规范中preventDefault()方法作用相同'</span><span class="token punctuation">,</span>
  target<span class="token operator">:</span> <span class="token string">'元素，只读，事件的目标元素，与DOM规范中的target属性相同'</span><span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">'字符串，只读，被触发事件的类型'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/*
 * 事件源可通过 target 属性得到，但IE8及以下是通过 srcElement 属性，所以兼容写法为：target = event.target || event.srcElement
 * IE8及以下不支持事件捕获，只存在事件冒泡
 */</span>
<span class="token keyword">function</span> <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
  <span class="token keyword">let</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target <span class="token operator">||</span> event<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**===================================================== 事件类型 =====================================================*/</span>
<span class="token comment">//确定浏览器是否支持DOM2级事件规定的HTML事件，可使用如下方法，注意是遵循规范实现的才返回true，非标准实现的则会返回false</span>
<span class="token comment">//除了HTML事件“HTMLEvents”，还有变动事件“MutationEvents”</span>
<span class="token keyword">let</span> isDOM2HTMLEvents <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">&quot;HTMLEvents&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//DOM2级事件类型为复数</span>

<span class="token comment">//确定浏览器是否支持DOM3级事件规定的UI事件，可使用如下方法，注意是遵循规范实现的才返回true，非标准实现的则会返回false</span>
<span class="token comment">//除了UI事件“UIEvent”，还有焦点事件“FocusEvent”、鼠标事件“MouseEvent”、复合事件“CompositionEvent”</span>
<span class="token keyword">let</span> isDOM3UIEvent <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">&quot;UIEvent&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//DOM3级事件类型为单数</span>

<span class="token comment">/**====================================================== UI事件 ======================================================*/</span>
<span class="token comment">/* load、unload、abort、error、select、resize、scroll 等 */</span>

<span class="token comment">/* 在window对象上发生的事件都可以放在html中body标签上绑定 */</span>
<span class="token comment">/**
 * load 事件
 * 1、页面完全加载后（包括所有图像、JS文件、CSS文件等外部资源）在window上触发（实际DOM2级规定应在document上触发，但所有浏览器都在window上实现了该事件），event.target将指向document
 * 2、所有框架都加载完毕时在框架集上触发，或者框架加载完成后在该框架上触发
 * 3、图像加载完毕时在&lt;img&gt;元素上触发（不管是DOM中的图像元素还是HTML中的图像元素都可以），JS中可以使用Image对象创建图像，就像直接使用img元素一样，只是其不能添加到DOM树中(不能像创建的img标签插入到文档中)
 * 4、嵌入内容加载完毕时在&lt;object&gt;元素上触发
 * 5、script标签也可以触发load事件，但其不像img图像只要设置了src属性就开始下载，script要设置了src属性并添加到文档后才开始下载（IE9+支持）
 * */</span>

<span class="token comment">/**
 * DOMContentLoaded 事件（IE9+）
 * 页面形成完整的DOM树之后就会触发该事件（可在window和document上绑定该事件），event.target将指向document，该事件始终在 load 事件之前发生
 * */</span>

<span class="token comment">/**
 * unload 事件
 * 页面文档完全卸载后在window上触发（实际DOM2级规定应在document上触发，但所有浏览器都在window上实现了该事件），event.target将指向document
 * */</span>

<span class="token comment">/**
 * beforeunload 事件
 * 该事件在浏览器卸载页面前触发（关闭标签和重新加载页面时都可以触发），可用于取消卸载操作（由用户选择）
 * 要触发弹出让用户选择是否离开当前页面的弹框必须要将 event.returnValue 设置为要显示给用户的字符串(IE)，或者返回这些字符串(Chrome等)，但实测发现可以触发弹框但显示的文本是浏览器自带的
 * */</span>

<span class="token comment">/**
 * resize 事件
 * 当浏览器窗口尺寸发生改变时(包括最大/小化时)在window上触发（实际DOM2级规定应在document上触发，但所有浏览器都在window上实现了该事件），event.target将指向document
 * */</span>

<span class="token comment">/**
 * scroll 事件
 * 1、虽然scroll滚动事件发生在window对象上触发，但实际表示的则是页面中元素的变化而不是窗口的变化，
 * 可通过window.pageYOffset和window.pageXOffset来获取窗口垂直或水平滚动距离(IE9+)，另外也可标准模式下可通过&lt;html&gt;元素(document.documentElement)的scrollTop或scrollLeft反映滚动距离，混杂模式下则是&lt;body&gt;元素(document.body)上
 * 2、其他内部可滚动的元素上也可以出发scroll事件，只要绑定对象有滚动就会触发
 * */</span>

<span class="token comment">/**===================================================== 焦点事件 =====================================================*/</span>
<span class="token comment">/* 包括：focus、blur、focusin、focusout 等 */</span>

<span class="token comment">/*
* focus 和 blur 事件都不会冒泡
* */</span>

<span class="token comment">/**
 * focusin 事件
 * 元素获得焦点时触发，与focus事件等价，但该事件要冒泡
 * */</span>

<span class="token comment">/**
 * focusout 事件
 * 元素失去焦点时触发，该事件是blur事件的通用版本
 * */</span>

<span class="token comment">/*
 * document.hasFocus()
 * document.activeElement
 * */</span>

<span class="token comment">/**===================================================== 鼠标事件 =====================================================*/</span>
<span class="token comment">/* 包括：click、dbclick、mousedown、mouseup、mouseenter、mouseleave、mouseover、mouseout、mousemove、wheel/mousewheel/DOMMouseScroll、contextmenu 等 */</span>

<span class="token comment">/*
* 除了 mouseenter 和 mouseleave，其他所有鼠标事件都会冒泡，也可被取消
* 只有相继触发 mousedown 和 mouseup 事件，才会触发 click 事件，若前面两个事件任何一个被取消都不会触发 click 事件，同样要触发两次click才会触发dbclick
* 鼠标点击触发顺序：mousedown &gt; mouseup &gt; click &gt; mousedown &gt; mouseup &gt; click &gt; dbclick，
* */</span>

<span class="token comment">/*
* 关于鼠标位置信息(event对象上)
* clientX 和 clientY 表示鼠标相对浏览器客户可视区的坐标（即内容窗口）
* pageX 和 pageY 表示鼠标相对页面文档（整个页面本身）的坐标，在页面没有滚动的情况下其值与clientX/clientY相同，IE8-不支持页面坐标，不过可用客户区坐标和页面滚动距离计算出来
* screenX 和 screenY 表示鼠标相对整个设备屏幕的坐标
* */</span>

<span class="token comment">/*
* 关于鼠标按键信息(event对象上)，鼠标点击、按下、弹起事件中具备该属性
* button 属性返回鼠标按键对应键值，DOM规范中：0为主键(左)、1为中键(滚轮)、2为次键(右)
* IE8下的键值与DOM规范中的差异较大，为兼容可将其规范化为DOM方式（参考‘事件JS兼容.js’文件中getButton()方法）
* */</span>

<span class="token comment">/*
* detail 属性在鼠标事件中的作用
* 该属性是DOM2级事件中提供事件更多信息的属性，在鼠标事件中表示在同一目标上连续发生了多少次单击(click)，
* 注意是连续点击时次数才会递增记录，有所停顿就会又从1开始，且该属性在鼠标点击、按下、弹起过程中都能检测，并不只是click点击时才能检测，因此可通过该属性判断单击、双击、三击等等
* */</span>

<span class="token comment">/**
 * wheel 鼠标滚轮滚动事件，IE9+支持，主流浏览器也都支持，另外Chrome下有非标准 mousewheel ，Firefox有非标准 DOMMouseScroll，
 * 该事件可在任何元素上触发，最终会冒泡到 window 对象或 document 对象上(IE8)
 * UI事件中scroll滚动事件只要绑定对象有滚动就会触发，而鼠标滚动事件只有通过鼠标相关设备触发滚动时才触发(例如拖动滚动条就只会触发滚动事件，而不会触发鼠标滚动事件)
 * */</span>

<span class="token comment">/*
* wheelDeltaX/wheelDeltaY 属性判断对应方向鼠标滚动方向（具体正负对应的方向可打印对比来判断）
* 当鼠标滚轮向上滚动时，该属性是‘+120’的倍数，向下滚动时则是‘-120’的倍数，因此可以根据 wheelDelta 属性的正负来判断滚轮滚动方向（多数情况下我们只需要知道滚动方向，因为该数值没特殊含义）
* 对于Firefox的DOMMouseScroll事件，该信息保存在 detail 属性中，且其值是‘3’的倍数，正负号也刚好相反，即向上滚为‘-3’倍数，线下滚为‘+3’倍数（兼容处理参考‘事件JS兼容.js’文件中getWheelDelta()方法）
*
* wheel 标准事件中可以通过`deltaX/deltaY`属性的正负判断对应方向上的滚动方向（具体正负对应的方向可打印对比来判断）
* */</span>

<span class="token comment">/**
 * mouseover 与 mouseenter 的区别：over是鼠标从其他元素上面移到事件元素身上就触发(是直接身上，所以鼠标在其子元素上面时表明已out)，而enter是鼠标进入事件元素的边界时触发(内部子元素也在边界内，所以不会多次触发)
 * mouseout 与 mouseleave 的区别：mouseout为鼠标移出事件元素身上，对应mouseover，而mouseleave为鼠标离开事件元素边界，对应mouseenter
 * mouseenter 和 mouseleave 类似于css中的 hover 效果
 * */</span>

<span class="token comment">/**
 * contextmenu 上下文菜单事件
 * 该事件一般右键调出当前窗口菜单项时触发（在Mac上 Ctrl+左键点击也可调出菜单项），可用于阻止默认菜单而显示自定义的菜单，该事件可冒泡，所以可以放在document上统一处理该事件
 * */</span>

<span class="token comment">/**================================================= 键盘与文本输入事件 =================================================*/</span>
<span class="token comment">/* 键盘事件包括：keydown、keypress、keyup；文本输入事件只有：textInput */</span>

<span class="token comment">/**
 * keydown 事件
 * 用户按下键盘上“任意键”时可触发，若按住不放则会重复触发该事件
 * 相对的就是 keyup 事件，当用户释放按键时触发
 * */</span>

<span class="token comment">/**
 * keypress 事件
 * 该事件是用户按下键盘上“字符键”时可触发，若按住不放则会重复触发该事件，按下“Esc”退出键时也会触发该事件
 * 注意，这三个键盘事件发生顺序是：keydown &gt; keypress &gt; keyup，且前两个事件都是在文本框放生变化前被触发的，而 keyup 是文本框发生变化后被触发的
 * */</span>

<span class="token comment">/**
 * textInput 文本事件
 * 该事件是对keypress事件的补充，在文本插入文本框之前会触发该事件，虽是keypress事件的补充，但也所区别：
 * 1、任何可获得焦点的元素都可触发 keypress 事件，但只有可编辑区域才能触发 textInput 事件；
 * 2、textInput 事件只会在用户按下能够输入实际字符的键时才会触发，而 keypress 事件则在按下那些能够影响文本显示的键时也会触发（例如删除键）
 * 3、实测发现：在打完拼音按空格键确认键入汉字时不会触发keypress事件，但能触发 textInput 事件
 *
 * 该事件event对象上还包含以下属性：
 * data：返回用户输入的字符（注意是实际显示的字符，不是字符编码）；
 * inputMethod：数字，返回把文本输入到文本框的方式，但该属性目前只有IE支持
 * */</span>

<span class="token comment">/*
* keyCode 属性返回按键的键码，每个按键都对应一个键码，通过键码可以知道按下的是哪个键
* keydown 和 keyup 事件中可检测该属性
* */</span>

<span class="token comment">/*
* charCode 属性返回按键的字符编码(ASCII编码)，字符编码意味着应在 keypress 事件中检测该属性（能插入或删除字符的键都会触发keypress事件）
* IE8下是在keyCode属性中保存字符的ASCII编码编码，所以要考虑IE8下兼容写法（参考‘事件JS兼容.js’文件中getCharCode()方法）
* 取得字符编码后，就可以使用 String.fromCharCode() 方法将其转换为实际的字符
* */</span>

<span class="token comment">/*
* DOM3级中键盘事件变化
* 1、去掉了 CharCode 属性；
* 2、新增了 key 和 char 属性，key为取代keyCode，返回按键字符或键名；char在按下字符键时与key相同，非字符键时返回null；
* 3、新增了 location 属性，表示按下了什么位置上的键；
* 4、新增了 getModifierState() 方法，接受一个参数，传入Shift、Control、AltGraph、Meta关键字之一，检测对应修改键是否被激活，实际已有像shiftKey这样的属性能检测这些辅助按键；
* 由于各浏览器兼容问题，这些属性或方法有的有实现，有的没实现，各浏览器兼容性不一，所以不建议使用它们
* */</span>

<span class="token comment">/**================================================= 复合事件（DOM3级） =================================================*/</span>
<span class="token comment">/*
* 复合事件包括：compositionstart、compositionupdate、compositionend，IE9+支持
* 复合事件用于处理输入法编辑器(IME)的输入序列，输入法编辑器(我们常说的输入法)可让用户输入在物理键盘上找不到的字符，例如我们的键盘为英文键盘，但我们通过IME(如搜狗输入法)可以输入汉字，
* IME通常需要按多个建，但最终只输入一个字符(就像我们输入一个汉字要按多个键打出拼音，但最后实际在文本框中输入的只是一个汉字)，复合事件就是用于处理这样的输入而设计的。
* 注意：很多输入法可以在多种输入状态中切换，只有在复合输入中能触发复合事件，像在英文状态下这样一个键就能输入一个字符的情况时是不能触发复合事件的。
* */</span>

<span class="token comment">/**
 * compositionstart 事件
 * 该事件在复合输入开始时触发，表示要开始输入了
 * event.data 属性返回正在编辑的文本，如已经选中的正要被当前键入内容替换的文本
 * */</span>

<span class="token comment">/**
 * compositionupdate 事件
 * 该事件在向输入字段中插入新字符时触发，表示正在输入，Chrome实测输入拼音过程中没按下一个字母就会触发一次，最后键入汉字时也会触发；
 * event.data 属性返回正在插入的新字符（实测发现键入拼音过程中也会返回拼音）
 * */</span>

<span class="token comment">/**
 * compositionend 事件
 * 该事件在向输入字段中插入新字符完毕时触发，表示该阶段复合输入完毕，Chrome实测最后键入汉字时才触发该事件，输入拼音过程中不会触发；
 * event.data 属性返回当前键入的文本（不包含拼音键入过程）
 * */</span>

<span class="token comment">/**================================================= (DOM节点)变动事件 =================================================*/</span>
<span class="token comment">/*
* DOM2级中的变动事件包括：DOMSubtreeModified、DOMNodeInserted、DOMNodeRemoved、DOMNodeInsertedIntoDocument、DOMNodeRemovedFromDocument、DOMAttrModified、DOMCharacterDataModified
* IE9+支持，由于DOM3级事件废除了很多变动事件（由 MutationObserver 替代），下面主要介绍仍得到支持或可能用到的变动事件
* 由于DOMSubtreeModified、DOMNodeInserted、DOMNodeRemoved可冒泡，所以可以绑定到祖先元素或者document上来监听DOM节点内部变动
* */</span>

<span class="token comment">/**
 * 删除节点
 * 使用removeChild()或replaceChild()等方法从DOM中删除节点时，首先会触发：
 * 1、DOMNodeRemoved 事件，该事件可冒泡，其目标target指向被删除的节点，相关节点relatedNode指向目标节点的父节点；该事件触发时，节点还未从其父节点删除，所以其parentNode这时还与relatedNode一样指向父节点。
 * 若被移除节点包含子节点，则该节点及其所有子节点还会相继触发：
 * 2、DOMNodeRemovedFromDocument 事件，该事件不冒泡，所以只有直接注册了该事件的节点会响应，其目标target指向被删除的节点或子节点。
 * 最后触发：
 * 3、DOMSubtreeModified 事件，该事件可冒泡，其目标target指向被移除节点的父节点
 * */</span>

<span class="token comment">/**
 * 插入节点
 * 使用appendChild()、replaceChild()或insertBefore()等方法向DOM中插入节点时，首先会触发：
 * 1、DOMNodeInserted 事件，该事件可冒泡，其目标target指向被插入的节点，相关节点relatedNode指向目标节点的新父节点；该事件触发时，节点已被插入到新的父节点中，所以其parentNode这时还与relatedNode一样指向新父节点。
 * 紧接着触发：
 * 2、DOMNodeInsertedIntoDocument 事件，该事件不冒泡，所以要在插入节点前就为其注册该事件，其目标target指向被插入的节点。
 * 最后触发：
 * 3、DOMSubtreeModified 事件，该事件可冒泡，其目标target指向被插入节点的父节点
 * */</span>

<span class="token comment">/*
* &lt;body&gt;
*     &lt;ul&gt;
*         &lt;li&gt;item1&lt;/li&gt;
*         &lt;li&gt;item2&lt;/li&gt;
*     &lt;/ul&gt;
* &lt;/body&gt;
*
* 假设在上面这个简单HTML页面中，我们要移除 ul 元素，就会依次触发以下事件：
* 1、ul 元素上触发 DOMNodeRemoved 事件，relatedNode 指向 document.body；
* 2、ul 元素上触发 DOMNodeRemovedFromDocument 事件；
* 3、在身为ul子元素的每个li元素及文本节点上触发 DOMNodeRemovedFromDocument 事件；
* 4、在 document.body 上触发 DOMSubtreeModified 事件，因为 ul 是 document.body 的直接子元素。
*
* 仍以上面的HTML结构为例，若我们动态增加了一列item3，就会依次触发以下事件：
* 1、在新增的item3项 li 元素上触发 DOMNodeInserted 事件，relatedNode 指向 ul；
* 2、在新增的item3项 li 元素上触发 DOMNodeInsertedIntoDocument 事件；
* 3、在 ul 元素上触发 DOMSubtreeModified 事件。
* */</span>

<span class="token comment">/**===================================================== HTML5事件 =====================================================*/</span>
<span class="token comment">/* 其包含较多事件，因为在HTML5中新规范的事件都可以叫HTML5事件，这些事件可能属于其他事件分类，下面只介绍部分 */</span>

<span class="token comment">/**
 * hashchange 哈希改变事件（IE8+）
 * 只要URL的参数列表hash值改变（URL中“#”后面的所有字符串）就会触发该事件，且必须在 window 对象上注册该事件
 * event对象上额外包含两个属性：oldURL、newURL，即参数列表变化前后的完整URL，因IE不支持这两个新属性，所以最好使用 location 对象来确定当前参数列表
 * */</span>

<span class="token comment">/**============================================= 设备事件（主要针对移动设备） =============================================*/</span>
<span class="token comment">/* 以下介绍的几个事件已在Android上实测可用 */</span>

<span class="token comment">/**
 * orientationchange 设备屏幕显示方向改变事件（横竖屏）
 * 设备在竖屏与横屏间切换时会在window上触发该事件，window.orientation 属性返回一个数值反映了屏幕方向，竖屏时为‘0’，左旋转横屏时为‘90’，右旋转横屏时为‘-90’，头部朝下本应为‘180’(但似乎没设备实现屏幕颠倒)
 * 注意：此处说的是屏幕显示方向，当使用手机方向锁定后旋转手机时屏幕不会跟着旋转也就不会触发该事件了，且 window.orientation 的值也不会改变
 * */</span>

<span class="token comment">/**
 * deviceorientation 设备方向改变事件（设备各角度旋转）
 * 设备方向改变时在window上触发该事件（指x、y、z各方向旋转时，即设备朝向改变），此时设备的三维直角坐标系为(竖屏)：向右为X轴正方向、向上为Y轴正方向、从屏幕内向外为Z轴正方向，当设备静止放在水平面上时，这三个值都为‘0’
 * 注意：此处说的是设备方向，而不是屏幕显示方向，设备稍微有点旋转就会触发该事件，而且不受手机方向锁定的影响
 * 该事件的事件对象event中包含以下5个属性：
 * 1、alpha：绕 Z 轴旋转时(即左右摇动)的旋转角度，为 0 ~ 360 间的浮点数；
 * 2、beta：绕 X 轴旋转时(即上下翻转)的旋转角度，为 -180 ~ 180 间的浮点数；
 * 3、gamma：绕 Y 轴旋转时(即前后侧边翻转)的旋转角度，为 -90 ~ 90 间的浮点数；
 * 4、absolute：布尔值，表示设备是否返回一个绝对值；
 * 5、compassCalibrated：布尔值，表示设备的指南针是否校准过。
 *
 * 由三个方向的角度可以映射出方向向量
 * */</span>

<span class="token comment">/**
 * devicemotion 设备移动事件
 * 设备移动时在window上触发该事件，可用于检测设备是否在往下掉或者移动快慢
 * 该事件的事件对象event中包含以下几个属性：
 * 1、acceleration：一个包含x、y、z属性的对象，表示不考虑重力情况下各方向上的加速度；
 * 2、accelerationIncludingGravity：也是一个包含x、y、z属性的对象，但表示在考虑Z轴重力加速度情况下各方向上的加速度；
 * 3、rotationRate：一个包含alpha、beta、gamma属性的对象，表示方向（由三个方向的角度可以映射出方向向量？）；
 * 4、interval：以毫秒表示的时间值（刷新一帧的时间，帧率一般为60，所以其值一般为16.666），必须在另一个devicemotion事件触发前传入，该值在每个事件中应该是个常量；
 * */</span>

<span class="token comment">/**=================================================== 触摸与手势事件 ===================================================*/</span>
<span class="token comment">/* 触摸事件包含：touchstart、touchmove、touchend、touchcancel；手势事件包含(实测Android还不支持)：gesturestart、gesturechange、gestureend */</span>

<span class="token comment">/**
 * touchstart，手指触摸屏幕时触发，每次触摸都会触发；
 * touchmove，手指在屏幕上滑动时会连续触发，可阻止默认滚动；
 * touchend，手指从屏幕上抬起时触发；
 * touchcancel，当系统停止跟踪触摸操作时触发，实测为触摸后长时间停留却又未作任何移动操作就抬起手指时会触发，类似于长按操作。
 *
 * 这几个事件都会冒泡，也都可以取消，event 对象除包含鼠标事件一些常见属性外，还包含三个用于跟踪触摸的属性：
 * 1、touches：表示当前跟踪的触摸操作的 Touch 对象的数组；
 * 2、targetTouches：特定于事件目标的 Touch 对象的数组；
 * 2、changeTouches：表示自上次触摸以来发生了一些改变的 Touch 对象的数组；
 *
 * 每个 Touch 对象包含以下属性：
 * clientX、clientY、pageX、pageY、screenX、screenY、target、identifier(标识触摸的唯一ID)
 * */</span>



<span class="token comment">/* ========= 表单事件 ========= */</span>
<span class="token comment">/**
* 当提交表单和重置表单时，&lt;form&gt;元素会分别触发 submit 和 reset 事件
* 当用户通过输入文字、选择选项或选择复选框来改变相应表单元素的状态时，这些通常维护某种状态的表单元素会触发 change 事件，对于文本输入域(包括单行和多行)只有失去焦点时才会触发 change 事件
* 通过键盘可改变焦点(即通过tab键可得到焦点)的元素在得到和失去焦点时会分别触发 focus 和 blur 事件， focus 和 blur 事件不会冒泡，其他所有表单事件都可以，另外IE定义了focusin和focusout事件可冒泡，但其他浏览器还未形成统一标准
* 无论用户输入还是粘贴文字到文本输入表单元素中，除IE外的浏览器都会触发 input 事件，且每次插入文字都会触发，另外 textinput 事件也可成为input的事件的替代方案
* */</span>

<span class="token comment">/**=================================================== 其他事件 ===================================================*/</span>
<span class="token comment">/** 
 * visibilitychange 事件（IE10+）
 * 该事件表示当其选项卡的内容变得可见或被隐藏时(即浏览器切换标签时)，会在文档上触发 visibilitychange (能见度更改)事件
 * 该事件只能在document上触发，且只能用addEventListener进行事件绑定，可通过 document.visibilityState 属性判断当前文档的可见性，其值为`visible`或`hidden`
 */</span>
</code></pre></div><h2 id="自定义-模拟事件"><a href="#自定义-模拟事件" class="header-anchor">#</a> 自定义&amp;模拟事件</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//创建一个 p 元素</span>

<span class="token comment">/**================================================ 已过时的创建事件方法 ================================================*/</span>
<span class="token comment">/**
 * 创建事件方法，document.createEvent(参数)，IE9+支持，IE9以下使用 document.createEventObject() 没有参数
 * 参数为事件类型：UIEvents（一般UI事件）、MouseEvents（鼠标事件）、MutationEvents（一般DOM变动事件）、HTMLEvents（一般HTML事件）、Events（通用事件），DOM2级中使用复数，DOM3级中使用单数
 * DOM3级中还规定了：KeyboardEvent（键盘事件）、CustomEvent（自定义事件）
 * 创建的每个类型的事件对象上都有一个相应的初始化该类型事件的方法，该方法名格式为：init+上面的事件类型名(单数)，如：initUIEvent
 * */</span>
<span class="token keyword">let</span> e <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">'MouseEvents'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//上面创建的鼠标事件对象上有个 initMouseEvent 方法用于指定该鼠标事件相关的信息，其接收15个参数，如事件名、是否冒泡、能否取消事件、鼠标坐标信息、是否按下了辅助键、按下了哪个鼠标键等等</span>
<span class="token comment">/**
 * initMouseEvent初始化鼠标事件，参数依次为：
 * type：String，触发的事件类型，如‘click’
 * bubbles：Boolean，事件是否应冒泡，常设为true
 * cancelable：Boolean，能否取消该事件，常设为true
 * view：与事件关联的视图，几乎总设置为 document.defaultView
 * ...
 * */</span>
e<span class="token punctuation">.</span><span class="token function">initMouseEvent</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//initEvent()方法用于初始化通用事件，且接收前三个参数，其他信息通过直接给event对象添加属性的方式来描述具体事件信息，但该方法并不能精确模拟事件，可能不会触发某些操作</span>


<span class="token comment">/**=============================================== 新规范中的创建事件方法 ===============================================*/</span>

<span class="token comment">//事件初始化信息参数对象(可选)，其实就是把上面已过时方法中init初始化事件方法中第二个参数开始后面所有的参数都放在一个对象中(各属性也是可选的)，避免了以前不好记参数顺序的弊端</span>
<span class="token comment">//不同事件类型的初始化信息包含的内容有所不同，如鼠标事件有鼠标位置信息，而键盘事件没有鼠标位置信息，但有键码信息等</span>
<span class="token comment">/** Event 构造器init参数，Event类型为通用类型 */</span>
<span class="token keyword">const</span> eventInit <span class="token operator">=</span> <span class="token punctuation">{</span>
  bubbles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token comment">//事件是否应冒泡，默认false</span>
  cancelable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>   <span class="token comment">//能否取消该事件，默认false</span>
  composed<span class="token operator">:</span> <span class="token boolean">false</span>     <span class="token comment">//事件是否会在影子DOM根节点之外触发侦听器，默认false</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/** UIEvent 构造器init参数，UIEvent派生自Event */</span>
<span class="token keyword">const</span> UIEventInit <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>eventInit<span class="token punctuation">,</span>      <span class="token comment">//继承 Event 参数</span>
  view<span class="token operator">:</span> window<span class="token punctuation">,</span>      <span class="token comment">//与事件关联的视图，默认null</span>
  detail<span class="token operator">:</span> <span class="token keyword">null</span>       <span class="token comment">//额外的事件详细信息，默认为null，可以是用于存储任意想存储的信息以便在事件处理程序的使用</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/** MouseEvent 构造器init参数，MouseEvent派生自UIEvent */</span>
<span class="token keyword">const</span> mouseEventInit <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>eventInit<span class="token punctuation">,</span>       <span class="token comment">//继承 Event 参数</span>
  <span class="token operator">...</span>UIEventInit<span class="token punctuation">,</span>     <span class="token comment">//继承 UIEvent 参数</span>
  screenX<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>         <span class="token comment">//鼠标事件发生时相对于用户屏幕的水平坐标位置；该操作并不会改变真实鼠标的位置，默认0</span>
  screenY<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>         <span class="token comment">//鼠标事件发生时相对于用户屏幕的垂直坐标位置；该操作并不会改变真实鼠标的位置，默认0</span>
  clientX<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>         <span class="token comment">//鼠标事件发生时相对于客户端可视窗口的水平坐标位置；该操作并不会改变真实鼠标的位置，默认0</span>
  clientY<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>         <span class="token comment">//鼠标事件发生时相对于客户端可视窗口的垂直坐标位置；该操作并不会改变真实鼠标的位置，默认0</span>
  ctrlKey<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>     <span class="token comment">//标明 Ctrl 键是否同时按下，默认false</span>
  shiftKey<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token comment">//标明 Shift 键是否同时按下，默认false</span>
  altKey<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token comment">//标明 Alt 键是否同时按下(Mac上同option键)，默认false</span>
  metaKey<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>     <span class="token comment">//标明 meta 键是否同时按下，默认false，该键一般键盘上没有，Mac上用command表示，Windows上一般用窗口键(印有Windows logo那个键)模拟</span>
  button<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>          <span class="token comment">//鼠标哪个键被按下，默认0，0为主键(一般是左键)，1为辅助键(中键)，2为次键(右键)</span>
  buttons<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>         <span class="token comment">//鼠标哪些键被按下，默认0，0为无键按下，1为主键(左)，2为次键(右)，4为辅助键(中)</span>
  relatedTarget<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><span class="token comment">//事件相关元素，默认null，标明刚离开的元素 (事件 mouseover 发生时) 或刚进入的元素 (事件 mouseout 发生时)，即当前元素触发鼠标进入或离开事件时，那么这时鼠标必然是相对前一个元素的离开或下一个元素的进入才触发这个元素的进入/离开事件，这前一个或下一个元素就是相关元素</span>
  region<span class="token operator">:</span> <span class="token keyword">null</span>        <span class="token comment">//事件影响范围，默认null，标明点击事件影响的区域DOM的id，不影响任何区域的话请传null值</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 其实就是将以前创建某类型事件与初始化具体事件两步方法合并到一步中，并将事件信息参数都放到一个对象参数中设置，不用记住参数顺序，更加方便
 * 第一个参数为事件名，第二个“可选”参数为事件信息参数对象
 * 这里的new后面的构造器代表了事件类型， Event 表示创建的是通用事件实例，除此之外还有：MouseEvent（鼠标事件）、CustomEvent（自定义事件）、UIEvent（一般UI事件）、KeyboardEvent（键盘事件）、MutationEvent（一般DOM变动事件）、HTMLEvent（一般HTML事件）
 * */</span>
<span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'eventName'</span><span class="token punctuation">,</span> eventInit<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/**========================== 不管是新规范还是已过时规范，手动触发事件都是使用 dispatchEvent() 方法 ==========================*/</span>
<span class="token comment">//上面创建的事件都是可以像内置事件一样去监听的</span>
<span class="token comment">//在el元素上触发 e 事件对象对应的事件</span>
<span class="token comment">/**
 * 触发事件方法，DOM对象.dispatchEvent(event对象)，IE9+支持，IE9以下使用 document.fireEvent(事件名称[要加on], event对象)
 * */</span>
el<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/**========= IE9下对新规范自定义事件的Polyfill处理 =========*/</span>
<span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>CustomEvent</span><span class="token punctuation">(</span><span class="token string">'T'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token function-variable function">CustomEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      params <span class="token operator">=</span> params <span class="token operator">||</span> <span class="token punctuation">{</span> bubbles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> cancelable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> detail<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> evt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">'CustomEvent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      evt<span class="token punctuation">.</span><span class="token function">initCustomEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> params<span class="token punctuation">.</span>bubbles<span class="token punctuation">,</span> params<span class="token punctuation">.</span>cancelable<span class="token punctuation">,</span> params<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> evt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">CustomEvent</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

    window<span class="token punctuation">.</span>CustomEvent <span class="token operator">=</span> CustomEvent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//自执行后可直接使用 new CustomEvent('eventName') 方式创建事件</span>

<span class="token comment">/**========= IE8及以下浏览器中自定义/模拟事件 =========*/</span>
<span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token comment">//新规范方式</span>
    <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>CustomEvent</span><span class="token punctuation">(</span><span class="token string">'T'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> CustomEvent<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//就规范方式（IE9+支持）</span>
      <span class="token function-variable function">CustomEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        params <span class="token operator">=</span> params <span class="token operator">||</span> <span class="token punctuation">{</span> bubbles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> cancelable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> detail<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> evt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">'CustomEvent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        evt<span class="token punctuation">.</span><span class="token function">initCustomEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> params<span class="token punctuation">.</span>bubbles<span class="token punctuation">,</span> params<span class="token punctuation">.</span>cancelable<span class="token punctuation">,</span> params<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> evt<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//IE8及以下方式</span>
      <span class="token function-variable function">CustomEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//创建一个event对象，该方法不接收任何参数，必须后面手动为该event对象添加属性来增添事件信息(任何属性皆可，毕竟在事件处理程序中才会用到这些信息)</span>
        <span class="token keyword">let</span> evt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEventObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//对应IE8-触发事件的方法为：el.fireEvent('on'+eventName, eventObj)，此时注意事件名要加上‘on’</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">//将添加的事件信息设置到event对象上</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> params<span class="token punctuation">)</span><span class="token punctuation">{</span>
              evt<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> params<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> evt<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token class-name">CustomEvent</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    window<span class="token punctuation">.</span>CustomEvent <span class="token operator">=</span> CustomEvent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//自执行后可直接使用 new CustomEvent('eventName') 方式创建事件</span>

<span class="token comment">/**
 * 兼容IE8的创建指定事件类型和事件名的方法
 * @param eventType  事件类型
 * @param eventName  具体事件名
 * @param eventParams   事件参数对象
 * @returns {*}     返回事件对象
 */</span>
<span class="token keyword">function</span> <span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token parameter">eventType<span class="token punctuation">,</span> eventName<span class="token punctuation">,</span> eventParams</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> eventObj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  eventParams <span class="token operator">=</span> eventParams <span class="token operator">||</span> <span class="token punctuation">{</span> bubbles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> cancelable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> detail<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">//新规范</span>
    eventObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">window</span><span class="token punctuation">[</span>eventType<span class="token punctuation">]</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> eventParams<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//旧规范（IE9+支持）</span>
      eventObj <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> eventParams<span class="token punctuation">.</span>detail <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> eventParams<span class="token punctuation">.</span>detail <span class="token operator">=</span>  <span class="token keyword">null</span><span class="token punctuation">;</span>

      eventObj<span class="token punctuation">[</span><span class="token string">'init'</span><span class="token operator">+</span>eventType<span class="token punctuation">]</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> eventParams<span class="token punctuation">.</span>bubbles<span class="token punctuation">,</span> eventParams<span class="token punctuation">.</span>cancelable<span class="token punctuation">,</span> eventParams<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//IE8及以下方式</span>
      eventObj <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEventObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//将添加的事件信息设置到event对象上</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> params<span class="token punctuation">)</span><span class="token punctuation">{</span>
          eventObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> params<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> eventObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 兼容IE8的事件触发
 * @param el    触发事件的DOM元素
 * @param eventName     触发的具体事件名
 * @param eventObj      对应的自定义事件对象
 */</span>
<span class="token keyword">function</span> <span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> eventName<span class="token punctuation">,</span> eventObj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>dispatchEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
    el<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>eventName<span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span><span class="token function">fireEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token operator">+</span>eventName<span class="token punctuation">,</span> eventObj<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//fireEvent为IE8-触发事件方法，注意事件名要加上‘on’</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="事件处理兼容"><a href="#事件处理兼容" class="header-anchor">#</a> 事件处理兼容</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> EventUtil <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/**===绑定事件处理器===
   * 三个参数：绑定对象元素ele、事件类型type、处理函数handler
   * */</span>
  <span class="token function">addHandler</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">/*现代浏览器*/</span>
      ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">/*IE*/</span>
      ele<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token operator">+</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">/*以上都无效则默认DOM0级*/</span>
      ele<span class="token punctuation">[</span><span class="token string">'on'</span><span class="token operator">+</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> handler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**===移除事件处理器===
   * 三个参数：移除对象元素ele、事件类型type、处理函数handler
   * */</span>
  <span class="token function">removeHandler</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>removeEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">/*现代浏览器*/</span>
      ele<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>detachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">/*IE*/</span>
      ele<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token operator">+</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">/*以上都无效则默认DOM0级*/</span>
      ele<span class="token punctuation">[</span><span class="token string">'on'</span><span class="token operator">+</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**===获取事件event对象===*/</span>
  <span class="token function">getEvent</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//在要用到event对象时，一般都先调用此方法再将返回的event对象传递给其他方法</span>
    <span class="token keyword">return</span> event <span class="token operator">?</span> event <span class="token operator">:</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>   <span class="token comment">//window.event是针对IE8</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**===阻止默认事件===*/</span>
  <span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span><span class="token punctuation">{</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">//IE8，效果同 return false;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**===阻止事件冒泡===*/</span>
  <span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>stopPropagation<span class="token punctuation">)</span><span class="token punctuation">{</span>
      event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**===获取事件源===*/</span>
  <span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> event<span class="token punctuation">.</span>target <span class="token operator">||</span> event<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**===获取相关事件源===*/</span>
  <span class="token function">getRelatedTarget</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">;</span>     <span class="token comment">//IE8不支持relatedTarget属性，但支持以下保存同样信息的自有属性</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>toElement<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> event<span class="token punctuation">.</span>toElement<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>fromElement<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> event<span class="token punctuation">.</span>fromElement<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**===获取鼠标点击按钮===*/</span>
  <span class="token function">getButton</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">&quot;MouseEvents&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//如果支持DOM版鼠标事件</span>
      <span class="token keyword">return</span> event<span class="token punctuation">.</span>button<span class="token punctuation">;</span>     <span class="token comment">//返回DOM规范中鼠标点击的键值，0为主键(左)、1为中键(滚轮)、2为次键(右)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>button<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">//针对IE8，将IE8下的键值规范化为DOM方式</span>
        <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**===获取鼠标滚轮滚动方向===*/</span>
  <span class="token function">getWheelDelta</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> event<span class="token punctuation">.</span>wheelDelta<span class="token punctuation">;</span>    <span class="token comment">//mousewheel</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span>event<span class="token punctuation">.</span>detail <span class="token operator">*</span> <span class="token number">40</span><span class="token punctuation">;</span>  <span class="token comment">//Firefox的DOMMouseScroll</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**===获取键盘按键字符(ASCII)编码===*/</span>
  <span class="token function">getCharCode</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment">//而后通过 String.fromCharCode() 方法就可得到实际的字符</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> event<span class="token punctuation">.</span>charCode <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> event<span class="token punctuation">.</span>charCode<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>  <span class="token comment">//IE8</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/js/计算Math.html" class="prev">
        计算Math
      </a></span> <span class="next"><a href="/docs/js/WebComponents.html">
        Web Components
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.75a61c29.js" defer></script><script src="/docs/assets/js/2.3ed89261.js" defer></script><script src="/docs/assets/js/38.682ac94b.js" defer></script>
  </body>
</html>
